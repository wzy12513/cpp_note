# ä»£ç é£æ ¼

è¿™é‡Œå†™ç‚¹ä¸Šè¯¾æ—¶ä¸æ—¶ä¼šæåˆ°å¾—ä»£ç æ ¼å¼ï¼ˆå±äºä¸å®šæœŸè¡¥å……çš„é‚£ç§ï¼‰

æœ¬äººå¼ºè¿«ç—‡ è¿™ä¸ªéƒ¨åˆ†é‡è¦ç¨‹åº¦ç»å¯¹æ˜¯**t0**



# C++ å‰ç½®

1.æ–‡ä»¶åç¼€ .cc(linuxä¸‹) or .cpp(windowsä¸‹)

2.ç¼–è¯‘æŒ‡ä»¤

â€‹    $ gcc *.cc [-o name]

3.instal

â€‹    $sudo apt install g++

# å‘½åç©ºé—´

## namespace 

ä½œç”¨ï¼šè§£å†³å‘½åå†²çª

```c++
namespace name
{
int number = 1;

void test(){
    
}//end of tese
}//end of name 
```

==åœ¨å‘½åç©ºé—´ä¸­å®šä¹‰çš„ç»Ÿç§°ä¸ºå®ä½“ï¼ˆåŒ…æ‹¬å˜é‡å’Œå‡½æ•°ï¼‰==

==å‘½åç©ºé—´çš„ä»£ç é¡¶æ ¼ï¼Œä¸éœ€è¦ç¼©è¿›==

## ä½¿ç”¨å‘½åç©ºé—´

ä¸‰ç§æ–¹å¼

### ä½¿ç”¨ä½œç”¨åŸŸé™å®šç¬¦:: ï¼Œé™å®šç¬¦å‰ä¸ºå‘½åç©ºé—´çš„åå­—ï¼Œåé¢ä¸ºå‘½åç©ºé—´ä¸­çš„å®ä½“

```c++
namespace name
{
int number = 1;

void test(){
    
}//end of tese
}//end of name 

int main(){
    name::number = 1;
    name::test();
}
```

### ç”¨usingç¼–è¯‘æŒ‡ä»¤ä¸€æ¬¡æ€§æŠŠå‘½åç©ºé—´ä¸­çš„å®ä½“å…¨éƒ¨å¼•å…¥

```c++
namespace name
{
int number = 1;

void test(){
    
}//end of tese
}//end of name 

using namespace name;

int main(){
    number = 1;
    test();
}
```

### å¯ä»¥ä½¿ç”¨usingå¯¹å•ä¸ªå®ä½“è¿›è¡Œä½¿ç”¨

```c++
#include<iostream>
//using namespace std;
using std::cout;//ä½¿ç”¨stdé‡Œçš„cout
using std::endl;//ä½¿ç”¨stdé‡Œçš„endl

int main(){
    cout<<"hello world"<<endl;
    
    return 0;
}
```

å¯ä»¥åªusing stdé‡Œçš„coutå’Œendlè¿™ä¸¤ä¸ªå®ä½“ï¼ˆåæ­£å…¶ä»–æ²¡ç”¨çš„è¯ï¼‰

## using ä¼šé€ æˆçš„å®šä¹‰å†²çª

```c++
#include<iostream>

using namespace std;

void cout(){ //å“å‘€ï¼Œæˆ‘ä¸çŸ¥é“stdé‡Œé¢æœ‰coutè€¶ï¼Œå“å˜¿
    printf("\n");
}

int main(){
    cout();
    
    return 0;
}
```

![image-20220616213114634](pages/image-20220616213114634.png)

'cout' is ambiguous

å› ä¸ºå‘½åç©ºé—´stdä¸­å·²ç»åŒ…å«äº†æˆ‘ä»¬å¸¸ç”¨çš„coutï¼Œæ­¤æ—¶å†å¦å¤–å£°æ˜ä¼šå‡ºç°é—®é¢˜

æ‰€ä»¥åœ¨ä¸çŸ¥é“å‘½åç©ºé—´ä¸­ä¼šå‡ºç°ä»€ä¹ˆå®ä½“çš„æƒ…å†µä¸‹å¤§åŠ›æ¨èä½¿ç”¨ç¬¬ä¸‰ç§using

## å‘½åç©ºé—´çš„åµŒå¥—ä½¿ç”¨

å¯ä»¥åœ¨ä¸€ä¸ªå‘½åç©ºé—´ä¸­å†namespaceä¸€ä¸ªå‘½åç©ºé—´

```c++
namespace wd
{

int num = 1;
    
void display(){
    printf("num = %d\n", num);
}    

namespace cteam
{
int number = 2;

void display(){
    printf("number = %d\n", number);
}
    
}//end of namespace cteam
}//end of namespace wd
```

å½“ç„¶è°ƒç”¨å®ä½“çš„æ—¶å€™è¦ä¸€å±‚ä¸€å±‚è°ƒç”¨(å°±åƒå†™å¿«é€’åœ°å€ä¸€æ ·)

```c++
int main(){
    printf("num = %d, number = %d\n", wd::num, wd::cteam::number);
    
    wd::display();
    wd::cteam::display();
    
    return 0;
}
```

![image-20220616213033153](pages/image-20220616213033153.png)

## å‘½åç©ºé—´æ˜¯å¦åªå¯ä»¥å®šä¹‰ä¸€æ¬¡

å‡½æ•°æ˜¯åªèƒ½å®šä¹‰ä¸€æ¬¡

```c++
int add(intï¼Œint)ï¼›
int add(int a,int b){
    return a+b;
}
```

å‘½åç©ºé—´ä¹Ÿæ˜¯è¿™æ ·å—ï¼Œå½“ç„¶ä¸æ˜¯

```c++
namespace wd
{

int num = 1;
    
void display(){
    printf("num = %d\n", num);
}    

namespace cteam
{
int number = 2;

void display(){
    printf("number = %d\n", number);
}
    
}//end of namespace cteam
}//end of namespace wd

namespace wd
{
int number=3;
    
void show(){
    printf("number = %d\n",number);
}
    
}//end of namespace wd
```

å†æ¬¡å®šä¹‰å‘½åç©ºé—´ä¼šå°†æ–°çš„å‘½åç©ºé—´ä¸­å®šä¹‰çš„å®ä½“åŠ å…¥è¿›å»

å‘½åç©ºé—´å°±åƒé»‘æ´ï¼Œå¯ä»¥æ— é™å¸æ”¶æ–°çš„å®ä½“

## åŒ¿åç©ºé—´

c++ä½œä¸ºcçš„è¶…é›†å½“ç„¶å…¼å®¹cçš„å¤´æ–‡ä»¶

é‚£ä¹ˆè°ƒç”¨cçš„åº“å‡½æ•°æ—¶ä¼šå­˜æ”¾åœ¨==åŒ¿åç©ºé—´==ä¸­

```c++
::printf();
```

æ¨¡å—ï¼šå•ä¸ªcï¼Œc++æ–‡ä»¶

ä½†æ˜¯åŒ¿åç©ºé—´ä¸­çš„å®ä½“ä¹Ÿåªèƒ½åœ¨æœ¬æ¨¡å—ä¸­ä½¿ç”¨

åŒç†é™æ€å˜é‡ static ï¼Œé™æ€å‡½æ•°ä¹Ÿåªèƒ½åœ¨æœ¬æ¨¡å—ä¸­è°ƒç”¨

å…¨å±€å˜é‡externåˆ™å¯ä»¥è·¨æ¨¡å—è°ƒç”¨ï¼Œä½†æ˜¯åŒ¿åç©ºé—´çš„å…¨å±€å˜é‡ä¹Ÿåªèƒ½åœ¨æœ¬æ¨¡å—ä¸­è°ƒç”¨

# constå…³é”®å­—

ä¸Šé¢æåˆ°è¿‡é™æ€å˜é‡staticï¼Œå…¨å±€å˜é‡extern

è¿˜å‰©ä¸‹ä¸€ä¸ªå¸¸é‡const

constä¿®é¥°çš„å¸¸é‡ä¸èƒ½ä¿®æ”¹å…¶å€¼ï¼Œä½¿è¿™ä¸ªå˜é‡å…·æœ‰åªè¯»å±æ€§ï¼Œå®šä¹‰çš„æ—¶å€™ä¸€å®šè¦èµ‹å€¼ï¼Œå¦åˆ™ä¼šæŠ¥é”™

## constä¿®é¥°æŒ‡é’ˆ

æœ‰ä¸‰ç§æƒ…å†µ

### const int *P

```c++
int a = 1;
int b = 10;
const int *p = &a;
p = &b;  //ok     å¯ä»¥æ”¹å˜æŒ‡å‘
*p = 100;//error  ä¸å¯ä»¥æ”¹å˜æŒ‡é’ˆæ‰€æŒ‡å˜é‡çš„å€¼
```

### int * const p 

```c++
int a = 1;
int b = 10;
int * const p = &a;
p = &b;  //error ä¸å¯ä»¥æ”¹å˜æŒ‡å‘
*p = 100;//ok    å¯ä»¥æ”¹å˜æŒ‡é’ˆæ‰€æŒ‡å˜é‡çš„å€¼
```

### int const * const p

```c++
int a = 1;
int b = 10;
int const * const p = &a;
p = &b;  //error
*p = 100;//error
```

# NEW / DELETE

## c++ä¸­ç”³è¯·å†…å­˜ç©ºé—´

cè¯­è¨€ä¸­ä½¿ç”¨malloc / callocç”³è¯·å†…å­˜ï¼Œä½¿ç”¨freeé‡Šæ”¾å†…å­˜

c++ä¸­ä½¿ç”¨newç”³è¯·å†…å­˜ï¼Œä½¿ç”¨deleteé‡Šæ”¾å†…å­˜

==éƒ½éœ€è¦æˆå¯¹ä½¿ç”¨ï¼Œé˜²æ­¢å‘ç”Ÿå†…å­˜æ³„éœ²==

```c++
void test(){
    int *p = new int(10);//ç»™*pèµ‹å€¼10
    delete p;//å›æ”¶p
    
    //ä¸Šé¢æ˜¯åªæœ‰å•ä¸ªå˜é‡ï¼Œä¸‹é¢æ¼”ç¤ºæ•°ç»„
    
    int * arr = new int[10]();//å°æ‹¬å·å†…å¡«å€¼è¿›è¡Œåˆå§‹åŒ– ä¸­æ‹¬å·å†…å¡«å…ƒç´ çš„å¤§å°
    delete [] arr;//å›æ”¶æ•´ä¸ªæ•°ç»„çš„ç©ºé—´ï¼Œéœ€è¦åŠ []ï¼Œä¸åŠ ä¼šæŠ¥é”™
}
```

## ä¸cçš„å¼‚åŒ

### ç›¸åŒç‚¹ï¼š

éƒ½ç”¨æ¥ç”³è¯·å †ç©ºé—´

å¿…é¡»æˆå¯¹å‡ºç°ï¼Œå¦åˆ™ä¼šå‘ç”Ÿå†…å­˜æ³„æ¼

### ä¸åŒç‚¹ï¼š

new/deleteæ˜¯C++çš„è¡¨è¾¾å¼ï¼Œmalloc/freeæ˜¯Cçš„åº“å‡½æ•°

newåœ¨å¼€è¾Ÿç©ºé—´æ—¶å¯ä»¥åˆå§‹åŒ–ç©ºé—´ï¼Œmallocåªèƒ½ç”³è¯·ç©ºé—´ï¼Œä¸èƒ½åˆå§‹åŒ–

# å¼•ç”¨REFERENCE

reference æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªå˜é‡çš„åˆ«åã€‚

ä¸æŸä¸€ä¸ªå®ä½“ç»‘å®šåˆ°ä¸€èµ·ï¼Œå¯¹å¼•ç”¨çš„ä¿®æ”¹å°±æ˜¯å¯¹å˜é‡çš„ä¿®æ”¹

```c++
void tese(){
    int num = 1;
    int & ref = num;//refå°±æ˜¯numçš„åˆ«å å¯¹refçš„æ“ä½œå°±æ˜¯å¯¹numçš„æ“ä½œ
}
```

å¼•ç”¨æœ¬èº«ä¸èƒ½å•ç‹¬å­˜åœ¨ï¼ˆè™šç©ºç´¢æ•Œå—ï¼‰ï¼Œå¿…é¡»ç»‘å®šä¸€ä¸ªå®ä½“ï¼Œä¸€ç»ç»‘å®šä¸èƒ½æ”¹å˜å¯¹è±¡

å³å€¼æ²¡æ³•å–åœ°å€

```c++
void test(){
    int & ref = 1;//error éconstå¼•ç”¨ä¸èƒ½ç»‘å®šåˆ°ä¸€ä¸ªå³å€¼,å› ä¸ºè¿™ä¸ªå€¼ä¸åœ¨å†…å­˜ä¸­
    const int & ref2 = 1;//ok
}
```

**å¼•ç”¨çš„åº•å±‚å®ç°æ˜¯æŒ‡é’ˆå¸¸é‡**ï¼Œä»–çš„å‡ºç°å°±æ˜¯å‡å°‘æŒ‡é’ˆçš„ä½¿ç”¨



å®šä¹‰ ç±»å‹ & ref =å˜é‡

&çš„ç”¨æ³•ï¼š

â€‹    ==å–åœ°å€==

â€‹    æŒ‰ä½ä¸

â€‹    å¼•ç”¨ç¬¦å·



## å¼•ç”¨ä½œä¸ºå‡½æ•°çš„å‚æ•°

```c++
void swap(int & x, int & y){
    int tmp = x;
    x = y;
    y = temp;
}
//è°ƒç”¨å‡½æ•°æ—¶å¯ä»¥ç›´æ¥ä½œç”¨äºxï¼Œy äº¤æ¢å˜é‡çš„å€¼
```

ä¼˜åŠ¿ï¼šç›´è§‚ï¼Œä¸éœ€è¦ä¸ºå‚æ•°å¼€è¾Ÿé¢å¤–çš„ç©ºé—´ï¼Œä¸éœ€è¦è¿›è¡Œå¤åˆ¶ï¼Œè¿™æ ·æé«˜ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡

## å¼•ç”¨ä½œä¸ºå‡½æ•°çš„è¿”å›å€¼

```c++
int arr[5] = {1, 2, 3, 4, 5};

int & getVal(int i){
    return arr[i];
}//ä¼šç›´æ¥è°ƒç”¨å…¨å±€å˜é‡ï¼Œä¸ä¼šè¿›è¡Œå¤åˆ¶ï¼Œä»è€ŒèŠ‚çœå¼€é”€

int main(){
    getVal(1) = 10;//ç›´æ¥å¯¹arr[1]è¿›è¡Œèµ‹å€¼
    
    return 0;
}
```

ä¸æ™®é€šå‡½æ•°è¿”å›å€¼å¯¹æ¯”ï¼Œæ²¡æœ‰å¤åˆ¶å¼€é”€

è¿™ç§å†™æ³•è¿”å›çš„å˜é‡ä¸€å®šè¦å¤§äºå‡½æ•°çš„ç”Ÿå‘½å‘¨æœŸ

## ä¸èƒ½è¿”å›å±€éƒ¨å˜é‡çš„å¼•ç”¨

```c++
int & test(){
    int number = 1;
    return number;
}
```

ç¼–è¯‘æ—¶ä¼šæœ‰è­¦å‘Š

è¿è¡Œæ—¶ä¼šå‘ç”Ÿ==æ®µé”™è¯¯==

## ä¸è¦è½»æ˜“è¿”å›ä¸€ä¸ªå †ç©ºé—´å˜é‡ï¼ˆæŒ‡é’ˆï¼‰çš„å¼•ç”¨

è¿”å›å †ç©ºé—´å¼•ç”¨ï¼Œä½†æ˜¯æœ‰å†…å­˜æ³„æ¼ï¼Œå¦‚æœéè¦è¿™ä¹ˆåšï¼Œå¿…é¡»æœ‰å†…å­˜å›æ”¶æœºåˆ¶

```c++
int & func2(){
    int *p = new int(10);
    return *p;
}
```

è°ƒç”¨çš„äººå¦‚æœä¸çŸ¥é“è¿”å›çš„æ˜¯æŒ‡é’ˆ100%ä¼šå‘ç”Ÿå†…å­˜æ³„æ¼ï¼ˆæ˜Ÿç©ºï¼šå®Œå…¨æ•‘ä¸å›æ¥ï¼‰

## å¼•ç”¨ä¸æŒ‡é’ˆçš„å¼‚åŒ

æ—¢ç„¶å¼•ç”¨çš„åº•å±‚å®ç°æ˜¯å¸¸é‡æŒ‡é’ˆï¼Œé‚£ä¹ˆå¼•ç”¨ä¸æŒ‡é’ˆçš„å¼‚åŒæ˜¯ä»€ä¹ˆï¼Ÿ

### ç›¸åŒç‚¹ï¼š

éƒ½æ˜¯åœ°å€çš„æ¦‚å¿µï¼›

æŒ‡é’ˆæŒ‡å‘ä¸€å—å†…å­˜ï¼Œå®ƒçš„å†…å®¹æ˜¯æ‰€æŒ‡å†…å­˜çš„åœ°å€ï¼›å¼•ç”¨æ˜¯æŸå—å†…å­˜çš„åˆ«åã€‚

### åŒºåˆ«ï¼š

æŒ‡é’ˆæ˜¯ä¸€ä¸ªå®ä½“ï¼Œè€Œå¼•ç”¨ä»…æ˜¯ä¸ªåˆ«åï¼›

å¼•ç”¨ä½¿ç”¨æ—¶æ— éœ€è§£å¼•ç”¨(*)ï¼ŒæŒ‡é’ˆéœ€è¦è§£å¼•ç”¨ï¼›

å¼•ç”¨åªèƒ½åœ¨å®šä¹‰æ—¶è¢«åˆå§‹åŒ–ä¸€æ¬¡ï¼Œä¹‹åä¸å¯å˜ï¼›æŒ‡é’ˆå¯å˜ï¼›

å¼•ç”¨æ²¡æœ‰ constï¼ŒæŒ‡é’ˆæœ‰ constï¼›

å¼•ç”¨ä¸èƒ½ä¸ºç©ºï¼ŒæŒ‡é’ˆå¯ä»¥ä¸ºç©ºï¼›

â€œsizeof å¼•ç”¨â€å¾—åˆ°çš„æ˜¯æ‰€æŒ‡å‘çš„å˜é‡(å¯¹è±¡)çš„å¤§å°ï¼Œè€Œâ€œsizeof æŒ‡é’ˆâ€å¾—åˆ°çš„æ˜¯æŒ‡é’ˆæœ¬èº«(æ‰€æŒ‡å‘çš„å˜é‡æˆ–å¯¹è±¡çš„åœ°å€)çš„å¤§å°ï¼›

æŒ‡é’ˆå’Œå¼•ç”¨çš„è‡ªå¢(++)è¿ç®—æ„ä¹‰ä¸ä¸€æ ·ï¼›

ä»å†…å­˜åˆ†é…ä¸Šçœ‹ï¼šç¨‹åºä¸ºæŒ‡é’ˆå˜é‡åˆ†é…å†…å­˜åŒºåŸŸï¼Œè€Œå¼•ç”¨ä¸éœ€è¦åˆ†é…å†…å­˜åŒºåŸŸã€‚

# å¼ºåˆ¶è½¬æ¢

Cå’ŒC++éƒ½æœ‰å¼ºåˆ¶è½¬æ¢çš„å†™æ³•

## C

```C
TYPE a = (TYPE) EXPRESSION
```

Cçš„è½¬æ¢æ¯”è¾ƒéšæ„ï¼Œå•¥éƒ½èƒ½è½¬ï¼Œæ¯”å¦‚ä½ å¯ä»¥æŠŠä¸€ä¸ªæŒ‡å‘constå¯¹è±¡çš„æŒ‡é’ˆè½¬æ¢æˆæŒ‡å‘éconstå¯¹è±¡çš„æŒ‡é’ˆã€‚

## C++

C++å°†å¼ºåˆ¶è½¬æ¢åˆ†æˆäº†ä¸åŒçš„æƒ…å†µæ¥è®¨è®º

### static_cast

æœ€å¸¸ç”¨çš„è½¬æ¢ï¼Œåœ¨æŒ‡é’ˆä¹‹é—´åšè½¬æ¢ï¼Œç»å¸¸å°±æ˜¯åœ¨ï¼ˆvoid *ï¼‰å’Œå…¶ä»–ï¼ˆtype *ï¼‰ç±»å‹ä¹‹é—´çš„æŒ‡é’ˆåšè½¬æ¢

```c++
void test(){
    int iNumber = 100ï¼› 
    float fNumber = 0ï¼› 
    fNumber = (float) iNumberï¼›//Cé£æ ¼ 
    fNumber = static_cast<float>(iNumber);//c++é£æ ¼
        
    void *pVoid = malloc(sizeof(int)); 
    int *pInt = static_cast<int*>(pVoid); 
    *pInt = 1;
}
```

å¯ä»¥ç”¨$ grep (æ–‡ä»¶å.cc) * -n æ¥æŸ¥æ‰¾å¼ºåˆ¶è½¬æ¢çš„ä½ç½®

### const_cast

å»é™¤å¸¸é‡å±æ€§ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä¸å¤ªæ¨èä½¿ç”¨ï¼ˆä¸‹é¢è¿™ä¸ªå®ä¾‹ï¼Œå­¦äº†ä»¥åå¿˜æ‰å°±è¡ŒğŸ˜‚ï¼‰

```c++
void func(int * p){
    *p = 100;
    cout << "*p:" << *p << endl;
}

void test(){
    const int number = 1;
    cout << "number:" << number << endl;
    // number:1
    func(const_cast<int *>(&number));
    // *p:100
    cout << "number:" << number << endl;
    // number:1
}
```

![image-20220620134507406](pages/image-20220620134507406.png)

å¯ä»¥å‘ç°numberçš„å€¼ç»å†è¿‡func()å‡½æ•°ä»¥åå¹¶æ²¡æœ‰å˜æˆ100ï¼Œè¿™æ˜¯const_castæ¯”è¾ƒç‰¹åˆ«çš„åœ°æ–¹

å–æ¶ˆäº†constï¼Œä½†æ²¡æœ‰å®Œå…¨å–æ¶ˆ

æ‰€ä»¥è¿™ä¹ˆåç›´è§‰çš„å‡½æ•°ä¸€èˆ¬æƒ…å†µä¸‹ä¸å»ºè®®ä½¿ç”¨ï¼Œå…å¾—çœŸæœ‰äººä»¥ä¸ºèƒ½æŠŠconstå–æ¶ˆ

### dynamic_cast

ç”¨åœ¨æ´¾ç”Ÿç±»ä¸åŸºç±»ä¹‹é—´åšè½¬æ¢ï¼Œç­‰æˆ‘å­¦äº†å¤šæ€ä¸ç»§æ‰¿å†å›æ¥è¡¥å……

### reinterpret_cast

åœ¨ä»»æ„ç±»å‹é—´åšè½¬æ¢ï¼Œè·ŸCå·®ä¸å¤šï¼Œä¸å¸¸ç”¨ï¼Œä¸åšä»‹ç»

# å‡½æ•°é‡è½½

å½“å‡½æ•°åå­—ç›¸åŒï¼Œè¿”å›å€¼ç›¸åŒï¼Œä½†å‚æ•°ä¸åŒï¼Œç§°ä¸ºå‡½æ•°é‡è½½

å®ç°åŸç†ï¼šåå­—æ”¹ç¼–ï¼ˆname manglingï¼‰

å…·ä½“æ­¥éª¤ï¼šå½“å‡½æ•°åç›¸åŒæ—¶ï¼Œä¼šæ ¹æ®å‡½æ•°å‚æ•°çš„ç±»å‹ã€é¡ºåºã€ä¸ªæ•°ä¸åŒè¿›è¡Œæ”¹ç¼–



è¿™é‡Œæ˜¯cæ‰€æ²¡æœ‰çš„æœ€æ–°æœ€åŠ²çˆ†æœ€hotçš„å†™æ³•

```c++
int add(int x, int y){
    return x + y;
}

int add(int x, int y, int z){ // overload
    return x + y + z;
}

int main(){
    int a = 1, b = 2, c = 3;
    printf("add(a,b) = %d\n", add(a,b));
    printf("add(a,b,c) = %d\n", add(a,b,c));
    
    return 0;
}
```

![image-20220620141519335](pages/image-20220620141519335.png)



è®©æˆ‘åœ¨ç¼–è¯‘æ—¶åŠ ä¸Š-cæ¥çœ‹çœ‹ç¼–è¯‘æ—¶å‘ç”Ÿäº†ä»€ä¹ˆ

![image-20220620142202943](pages/image-20220620142202943.png)

å¯ä»¥å‘ç°æœ‰æœ‰ä¸¤ä¸ªå‡½æ•°

_Z3addii

_Z3addiii

å°†addå‡½æ•°æ”¹ç¼–åï¼Œä»¥C++çš„æ–¹å¼è¿›è¡Œäº†è°ƒç”¨

# extern "C" ï¼šC++å’ŒCæ··åˆç¼–ç¨‹

åˆšæ‰è®²äº†å‡½æ•°é‡è½½ï¼Œä½†æ˜¯è¿™æ˜¯C++åŒºåˆ«äºCç‹¬æœ‰çš„å†™æ³•

é‚£ä¹ˆï¼Œå½“æœ‰å¥‡æ€ªçš„éœ€æ±‚ï¼Œæ¯”å¦‚è¯´æƒ³ç”¨Cçš„æ–¹å¼è¿›è¡Œå‡½æ•°è°ƒç”¨è¯¥æ€ä¹ˆæ“ä½œå‘¢

å°†è¿™äº›ä»£ç åŠ å…¥åˆ°extern "C"{}å¤§æ‹¬å·èŒƒå›´å†…

```c++
extern "C"
{
    
int add(int x, int y){
    return x + y;
}
    
}//end of extern C
```

é‚£ä¹ˆåœ¨extern "C"èŒƒå›´å†…çš„å‡½æ•°ä¼šä»¥Cçš„æ–¹å¼è¿›è¡Œè°ƒç”¨ï¼Œä¸ä¼šè¿›è¡Œå‡½æ•°æ”¹ç¼–

C++å’ŒCè¿›è¡Œæ··åˆç¼–ç¨‹å°±æ˜¯è¿™æ ·çš„



ä½†æˆ‘è¿™ä¸ªæ‡’é¬¼æƒ³ç›´æ¥æŠŠä»£ç å¤åˆ¶åˆ°Cæ–‡ä»¶ä¸­ï¼Œä½†æ˜¯extern "C"åˆä¸æ˜¯Cçš„å‡½æ•°

æ€ä¹ˆè¯†åˆ«ç¼–è¯‘ç¯å¢ƒæ¥åšåˆ°å…¼å®¹æ€§æ›´é«˜å‘¢

æ¥åšç‚¹å°ä¼˜åŒ–

```c++
#ifdef __cplusplus  //è¿™æ˜¯åªåœ¨C++ç¼–è¯‘ç¯å¢ƒä¸‹æ‰æœ‰çš„å®ï¼ŒCç¼–è¯‘ç¯å¢ƒä¸‹æ²¡æœ‰
extern "C"
{
#endif
    
int add(int x, int y){
    return x + y;
}

#ifdef __cplusplus
}//end of extern C
#endif
```

åªè¦åœ¨C++çš„å‡½æ•°å‰å¢åŠ è¯†åˆ«ç¼–è¯‘ç¯å¢ƒçš„è¯­å¥å°±è¡Œ

ç›´æ¥å¤åˆ¶åˆ°Cæ–‡ä»¶ä¸­ä¹Ÿå¯ä»¥è·‘é€š

# é»˜è®¤å‚æ•°

å†™å‡½æ•°çš„æ—¶å€™ç»å¸¸ä¼šä¼ ä¸æ­¢ä¸€ä¸ªå‚æ•°è¿›å»ï¼Œä½†æ˜¯å¾€å¾€å¥½å‡ æ¬¡è°ƒç”¨åªæœ‰ä¸€ä¸¤æ¬¡ä¼šæ”¹å˜ä¸€ä¸‹å‚æ•°ï¼Œæœ‰ä»€ä¹ˆåŠæ³•å¯ä»¥çœäº‹å‘¢

```c++
int add(int x, int y = 0, int z = 0){
    return x + y + z;
}

int main(){
    int a = 1, b = 2, c = 3;
    cout << "add(a) : " << add(a) << endl;
    cout << "add(a,b) : " << add(a,b) << endl;
    cout << "add(a,b,c) : " << add(a,b,c) << endl;
}
```

![image-20220620151616417](pages/image-20220620151616417.png)

 å‡½æ•°ä¸­è®¾ç½®é»˜è®¤å‚æ•°é»˜è®¤ä»æœ€å³è¾¹å¼€å§‹ï¼Œå¯ä»¥æ‰€æœ‰å‚æ•°éƒ½è®¾ç½®é»˜è®¤å‚æ•°ï¼Œä½†ä¸æ”¯æŒåªè®¾ä¸­é—´å‚æ•°çš„å†™æ³•

```c++
int add(int x, int y, int z = 0); //ok
int add(int x, int y = 0, int z); //error
int add(int x = 0, int y = 0, int z = 0); //ok
```

æ‰€ä»¥è®°å¾—æŠŠæœ€ä¸å¸¸ç”¨çš„ç¼ºçœå‚æ•°æ”¾æœ€å³

å¦‚æœæ˜¯å°†å‡½æ•°çš„å£°æ˜å’Œå®ç°åˆ†å¼€ï¼Œé‚£ä¹ˆ==å°†é»˜è®¤å‚æ•°å†™åœ¨å£°æ˜ä¸­ï¼Œå®ç°çš„æ—¶å€™ä¸å†™==ï¼Œå¦åˆ™ä¼šæŠ¥é”™

```c++
int add(int x = 0, int y = 0, int z = 0)ï¼›
    
int main(){
    int a = 1, b = 2, c = 3;
    cout << "add(a) : " << add(a) << endl;
    cout << "add(a,b) : " << add(a,b) << endl;
    cout << "add(a,b,c) : " << add(a,b,c) << endl;
}

int add(int x, int y, int z){
    return x + y + z;
}
```

# bool

ï¼ˆæˆ‘æ€ä¹ˆè®°å¾—Cé‡Œä¹Ÿæœ‰boolç±»å‹æ¥ç€ï¼‰

ä¸æ˜¯1å°±æ˜¯0çš„ç±»å‹ï¼Œæ²¡ä»€ä¹ˆå¥½å¤šè¯´çš„ï¼Œç›´æ¥ä¸Šå®ä¾‹æŠŠ



```c++
void test(){
    bool b1 = 0;
    bool b2 = 1;
    bool b3 = 3;
    bool b4 = true;
    bool b5 = false;
    bool b6 = -1;
    cout << "size of bool :" << sizeof(bool) << endl;
    cout << "b1:" << b1 << endl
         << "b2:" << b2 << endl
         << "b3:" << b3 << endl
         << "b4:" << b4 << endl
         << "b5:" << b5 << endl
         << "b6:" << b6 << endl;
}
```

![image-20220620154337017](pages/image-20220620154337017.png)

0å°±æ˜¯0ï¼Œé0éƒ½æ˜¯1

# inline

C++æå‡ºäº†inlineå‡½æ•°ï¼Œinlineå‡½æ•°åœ¨ç¼–è¯‘æ—¶ï¼Œè¿›è¡Œè¯­å¥çš„æ›¿æ¢ï¼ŒåŠŸèƒ½ä¸å®å‡½æ•°ç±»ä¼¼

==inlineè¦æ”¾åœ¨å¤´æ–‡ä»¶ä¸­ï¼Œå³å£°æ˜å‡½æ•°ä¹‹å‰åŠ ä¸Šinlineï¼Œè€Œä¸”å¿…é¡»è¦å®ç°ï¼Œä¸èƒ½å•ç‹¬å¼€ä¸€ä¸ªæ¨¡å—æ¥å®ç°==

```c++
//add.hpp

inline int add(int x, int y){
    return x + y;
}
```

inlineå¯ä»¥åƒå®å®šä¹‰é‚£æ ·åšåˆ°ç›´æ¥æ›¿æ¢ä»è€ŒèŠ‚çœè°ƒç”¨å‡½æ•°çš„å¼€é”€

ä½†æ˜¯å½“å‡½æ•°å†…éƒ¨è¿‡å¤§æˆ–æ˜¯å‡½æ•°å†…æœ‰å¾ªç¯çš„è¯ä¸å»ºè®®ä½¿ç”¨inlineï¼Œä¼šé€ æˆä»£ç è†¨èƒ€ï¼Œå¯¼è‡´æ”¶ç›Šå¹¶ä¸é«˜



# å†…å­˜å¸ƒå±€

~~æ€ä¹ˆè¯´è¿™éƒ½æ˜¯æˆ‘æœ€è®¨åŒçš„ä¸€å—ï¼Œæ¯•ç«Ÿæˆ‘çš„è„‘å­åˆä¸æ˜¯å†…å­˜æ¡çš„å½¢çŠ¶~~

==ä¸ºäº†é¢è¯•å¤ä¹ ï¼Œå†²ï¼==

è¿™éƒ¨åˆ†è·ŸCçš„å·®ä¸å¤š

ä»¥32ä½ç³»ç»Ÿä¸ºä¾‹ï¼Œä¸€ä¸ªè¿›ç¨‹ï¼ˆç”¨æˆ·æ€ï¼‰åœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œèƒ½å¤Ÿè®¿é—®çš„æ˜¯è™šæ‹Ÿåœ°å€ç©ºé—´

![image-20220620155115648](pages/image-20220620155115648.png)

æ ˆåŒºï¼šæ”¾å‡½æ•°ã€æ™®é€šå˜é‡çš„

å †åŒºï¼šæ”¾mallocã€newå¼€è¾Ÿçš„å‡ºæ¥çš„å˜é‡

å…¨å±€ã€é™æ€åŒºï¼šstaticè¿™äº›å˜é‡æ”¾è¿™



å¯¹è¿™äº›æ„Ÿå…´è¶£ä¸å¦‚ç›´æ¥%pæ‰“å°ä¸€ä¸‹å˜é‡çš„ä½ç½®å°±å¥½

